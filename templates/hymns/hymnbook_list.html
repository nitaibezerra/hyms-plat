{% extends 'base.html' %}

{% block title %}Hinários - Portal de Hinários do Santo Daime{% endblock %}

{% block content %}
<h1 style="font-size: 2rem; color: #2c5282; margin-bottom: 2rem;">Hinários</h1>

{% if hymnbooks %}
    <div class="grid">
        {% for hymnbook in hymnbooks %}
            <div class="card">
                {% if hymnbook.cover_image %}
                    <img
                        src="{{ hymnbook.cover_image.url }}"
                        alt="{{ hymnbook.name }}"
                        style="width: 100%; height: 200px; object-fit: cover; border-radius: 4px; margin-bottom: 1rem;"
                    >
                {% endif %}
                <h2 style="font-size: 1.25rem; color: #2c5282; margin-bottom: 0.5rem;">
                    <a href="{% url 'hymns:hymnbook_detail' hymnbook.slug %}" style="color: inherit; text-decoration: none;">
                        {{ hymnbook.name }}
                    </a>
                </h2>
                <p style="color: #718096; margin-bottom: 0.5rem;">
                    <strong>Dono:</strong> {{ hymnbook.owner_name }}
                </p>
                <p style="color: #4a5568; margin-bottom: 0.75rem;">
                    <strong>Hinos:</strong> {{ hymnbook.hymn_count }}
                </p>
                {% if hymnbook.description %}
                    <p style="color: #4a5568; font-size: 0.875rem; margin-bottom: 1rem;">
                        {{ hymnbook.description|truncatewords:30 }}
                    </p>
                {% endif %}
                <a href="{% url 'hymns:hymnbook_detail' hymnbook.slug %}" class="btn">
                    Ver Hinário
                </a>
            </div>
        {% endfor %}
    </div>

    {% if is_paginated %}
        <div style="display: flex; justify-content: center; align-items: center; gap: 1rem; margin-top: 2rem;">
            {% if page_obj.has_previous %}
                <a href="?page=1" class="btn btn-secondary">&laquo; Primeira</a>
                <a href="?page={{ page_obj.previous_page_number }}" class="btn btn-secondary">Anterior</a>
            {% endif %}

            <span style="color: #4a5568;">
                Página {{ page_obj.number }} de {{ page_obj.paginator.num_pages }}
            </span>

            {% if page_obj.has_next %}
                <a href="?page={{ page_obj.next_page_number }}" class="btn btn-secondary">Próxima</a>
                <a href="?page={{ page_obj.paginator.num_pages }}" class="btn btn-secondary">Última &raquo;</a>
            {% endif %}
        </div>
    {% endif %}
{% else %}
    <div class="card">
        <p style="color: #718096; text-align: center;">Nenhum hinário encontrado.</p>
    </div>
{% endif %}
{% endblock %}
